Секции (Sections)

Таблица секций объектного эльф-файла хранит в себе все секции этого файла. Таблица секций - это массив из Elf32_Shdr структур, сама структура будет описана ниже. (A section header table index is a subscript into this array.) Поле e_shoff, которое находится в заголовке ELF-файла, представляет собой смещение от начала файла до начала таблицы секций; e_shnum содержит количество входов в таблицу секций (т.е. сколько в таблице элементов). Размер каждого входа (в байтах) содержится в поле e_shentsize.

Некоторые элементы в таблице секций зарезервированы; объектный файл не будет содержать секций для некоторых "специальных" индексов.

Рисунок 1-8: Индексы зарезервированных секций:


_N_a_m__e_ _________V__a_lu__e_
SHN_UNDEF 0
SHN_LORESERVE 0xff00
SHN_LOPROC 0xff00
SHN_HIPROC 0xff1f
SHN_ABS 0xfff1
SHN_COMMON 0xfff2
SHN_HIRESERVE 0xffff

SHN_UNDEF - этим значением помечаются неопределённые, пропущенные, не имеющие значения секции. Напрмер, символ "defined" с номером секции SHN_UNDEF - неопределённый сивол.

Примечание: индекс 0 также зарезервирован и распознаётся как неопределённое значение, таблица заголовков секций содержит элемент, доступный по индексу 0. Таким образом, если поле e_shnum в заголовке говорит о том, что в файле содержится 6 входов в таблице секций, то они (входы) будут проиндексированы от 0 до 5. Содержимое элемента с индексом 0 будет далее описываться в этом разделе. 

SHN_LORESERVE - это значение показывает, какова нижняя граница (минимальное значение) зарезервированных индексов.

SHN_LOPROC through SHN_HIPROC - значения в этом включающем интервале зарезервированы для нужд процессора.

SHN_ABS - Флаг определяет абсолютные значения для соответствующих ссылок. Т.е., символы, определённые в секции с таким флагом, не релоцируются.

SHN_COMMON - символы, определённые относительно этой секции, являются общими символами. Примерами могут быть  FORTRAN COMMON или невыделенные внешние переменные С.

SHN_HIRESERVE - этот флаг определяет верхнюю границу зарезервированных индексов. Система резервирует индексы между SHN_LORESERVE и SHN_HIRESERVE включительно. Значения не ссылаются на таблицу секций. Таким образом, таблица секций не содержит входов, доступных по зарезервированным индексам.

Секции содержат всю информацию об объектном файле, кроме ELF заголовка, таблицы программных заголовков, и таблицы заголовков секций. Более того, секции должны соответствовать некоторым условиям.

- каждая секция в объектном файле имеет только один заголовок, котоый её описывает. Заголовки, которые не описывают существующих секций, тоже могут существовать.

